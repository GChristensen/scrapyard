<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Scrapyard Settings</title>

    <link rel="icon" href="../icons/scrapyard.svg" type="image/png"/>

    <link rel="stylesheet" href="../lib/jstree/themes/default/style.css"/>
    <link rel="stylesheet" href="../lib/selectric/selectric.css"/>
    <link rel="stylesheet" href="shelf_list.css"/>
    <link rel="stylesheet" href="tree.css"/>

    <link rel="stylesheet" type="text/css" href="options.css" media="all"/>
    <link rel="stylesheet" type="text/css" href="../fonts/fontawesome.css"/>

    <script type="text/javascript" src="../lib/jquery.js"></script>
    <script type="text/javascript" src="../lib/selectric/jquery.selectric.js"></script>
    <script type="text/javascript" src="../lib/jstree/jstree.js"></script>
    <script type="text/javascript" src="../global.js"></script>
    <script type="module" src="options.js"></script>
</head>
<body>
<div class="dlg-cover dlg-confirm" style="display:none;">
    <div class="dlg">
        <div class="dlg-box">
            <div class="dlg-title">[title]</div>
            <div class="dlg-table" style="overflow:hidden;">
                <div class="row">
                    <div class="cell">[message]</div>
                </div>
                <div class="row">
                    <div class="cell" style="text-align:center;">
                        <input type="button" class="button-ok" value="OK" />
                        <input type="button" class="button-cancel" value="Cancel" />
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="dlg-cover dlg-alert" style="display:none;">
    <div class="dlg">
        <div class="dlg-box">
            <div class="dlg-title">[title]</div>
            <div class="dlg-table" style="overflow:hidden;">
                <div class="row">
                    <div class="cell">[message]</div>
                </div>
                <div class="row">
                    <div class="cell" style="text-align:center;">
                        <input type="button" class="button-ok" value="OK"/>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="settings-container">
    <div id="settings-menu">
        <a class="settings-menu-item" href="#settings">Settings</a>
        <a class="settings-menu-item" href="#capturesettings">Page Capture</a>
        <a class="settings-menu-item" href="#cloud">Cloud</a>
        <a class="settings-menu-item" href="#sync">Sync</a>
        <a class="settings-menu-item" href="#backup">Backup</a>
        <a class="settings-menu-item" href="#links">Check Links</a>
        <a class="settings-menu-item" href="#importrdf">Import RDF</a>
        <a class="settings-menu-item" href="#diagnostics" style="display: none">Diagnostics</a>
        <a class="settings-menu-item" href="#helperapp">Helper App</a>
        <a class="settings-menu-item" href="#help">User Manual</a>
        <a class="settings-menu-item" href="#about">About</a>
    </div>
    <div id="div-placeholder" class="settings-content settings-content-placeholder"></div>
    <div id="div-settings" class="settings-content" style="display:none;">
        <table width="815px" cellspacing="" cellpadding="" border="0" class="form-table">
            <tr>
                <td>Appearance</td>
                <td>
                    <div class="panel" id="display" >
                        <div class="double-container">
                            <div class="double-first">
                                <form>
                                    <fieldset style="border: none;">
                                        <div style="margin-bottom: 5px; margin-left: 0; display: flex;">
                                            <label for="option-sidebar-theme">Sidebar theme:&nbsp;&nbsp;&nbsp;</label>
                                            <select id="option-sidebar-theme" type="select" style="color: black">
                                                <option value="light" selected="selected">Light</option>
                                                <option value="dark">Dark</option>
                                            </select>
                                        </div>
                                        <div style="margin-bottom: 5px; margin-left: 0;">
                                            <label for="option-shelf-list-max-height">Maximum sidebar shelf list height (px): </label>
                                            <input id="option-shelf-list-max-height" type="number"/>
                                        </div>
                                    </fieldset>
                                </form>
                            </div>
                            <div class="double-last">
                                <form>
                                    <fieldset style="border: none;">
                                        <input id="option-capitalize-builtin-shelf-names" type="checkbox"
                                        /><label for="option-capitalize-builtin-shelf-names">Capitalize builtin shelf names</label>
                                        <div class="align-checkbox">
                                            <input id="option-do-not-show-archive-toolbar" type="checkbox"
                                            /><label for="option-do-not-show-archive-toolbar">Do not show toolbar in archived pages</label>
                                        <i class="help-mark"></i>
                                        <span class="tips hide">The edit toolbar could be toggled with the <code>Ctrl+Alt+T</code> key combination.</span>
                                        </div>
                                    </fieldset>
                                </form>
                            </div>
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <td>Firefox Integration</td>
                <td>
                    <div class="panel" id="firefox-integration" >
                        <div class="double-container">
                            <div class="double-first">
                                <form>
                                    <fieldset style="border: none;">
                                        <input id="option-show-firefox-bookmarks" type="checkbox"
                                        /><label for="option-show-firefox-bookmarks">Enable Firefox bookmarks integration</label>
                                        <div style="margin: 0; margin-left: 20px; width: max-content;">
                                            <input id="option-show-firefox-bookmarks-toolbar" type="checkbox"
                                            /><label for="option-show-firefox-bookmarks-toolbar">Show the bookmark toolbar folder</label><br>
                                            <input id="option-show-firefox-bookmarks-mobile" type="checkbox" style="display: none"
                                            /><label for="option-show-firefox-bookmarks-mobile" style="display: none">Show the mobile bookmarks folder</label>
                                        </div>
                                    </fieldset>
                                </form>
                            </div>
                            <div class="double-last">
                                <form>
                                    <fieldset style="border: none;">
                                        <div class="align-checkbox">
                                            <input id="option-do-not-switch-to-ff-bookmark" type="checkbox"
                                            /><label for="option-do-not-switch-to-ff-bookmark">Do not switch to new Firefox bookmarks</label>
                                        </div>
                                    </fieldset>
                                </form>
                            </div>
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <td>Behavior</td>
                <td>
                    <div class="panel double-container" id="behavior">
                        <div class="double-first">
                            <form>
                                <fieldset style="border: none;">
                                    <input id="option-switch-to-bookmark" type="checkbox"
                                    /><label for="option-switch-to-bookmark">Automatically switch to newly created bookmarks</label>
                                    <div class="align-checkbox">
                                        <input id="option-display-random-bookmark" type="checkbox"/><label for="option-display-random-bookmark"
                                        >Display random bookmarks in the sidebar</label>
                                        <i class="help-mark"></i>
                                        <span class="tips hide">Display random bookmarks from your collection at the bottom of the sidebar.</span>
                                    </div>
                                </fieldset>
                            </form>
                        </div>
                        <div class="double-last">
                            <form>
                                <fieldset style="border: none;">
                                    <div class="align-checkbox">
                                        <input id="option-open-bookmark-in-active-tab" type="checkbox"/><label for="option-open-bookmark-in-active-tab"
                                        >Left click opens bookmarks in the active tab</label>
                                        <i class="help-mark"></i>
                                        <span class="tips hide">Do not create new tabs for the opened bookmarks.</span>
                                    </div>
                                </fieldset>
                            </form>
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <td>Import/Export</td>
                <td>
                    <div class="panel double-container" id="export">
                        <div class="double-first">
                            <form>
                                <fieldset style="border: none;">
                                    <div style="display: flex;">
                                        Export format:&nbsp;&nbsp;&nbsp;
                                        <select id="option-export-format" type="select" style="color: black">
                                            <option value="json">JSON</option>
                                            <option value="org">ORG</option>
                                            <option value="org_shallow">ORG (links only)</option>
                                        </select>
                                    </div>
                                </fieldset>
                            </form>
                        </div>
                        <div class="double-last">
                            <form>
                                <fieldset style="border: none;">
                                    <input id="option-use-helper-app-for-export" type="checkbox"/><label for="option-use-helper-app-for-export"
                                        >Use the helper application to accelerate export</label><br>
                                    <div class="align-checkbox">
                                        <input id="option-undo-failed-imports" type="checkbox"/><label for="option-undo-failed-imports"
                                            >Undo failed imports</label>
                                        <i class="help-mark"></i>
                                        <span class="tips hide">Return the Scrapyard database at the state before a failed import or backup restore.<br>
                                            This may require twice as much time and disk space as the size of the imported content.</span>
                                    </div>
                                </fieldset>
                            </form>
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <td>Helper application</td>
                <td>
                    <div class="panel double-container" id="helper">
                        <div class="double-first">
                            <form>
                                <fieldset style="border: none;">
                                    <label for="option-helper-port">Port number:</label>
                                    <input id="option-helper-port" type="text" maxlength="5" size="6"/>
                                </fieldset>
                            </form>
                        </div>
                        <div class="double-last">
                            <form>
                                <fieldset style="border: none;">
                                    <div class="align-checkbox">
                                        <input id="option-browse-with-helper" type="checkbox"
                                        /><label for="option-browse-with-helper">Use the helper application to browse archives</label>
                                        <i class="help-mark"></i>
                                        <div class="tips hide">Check this only if you need to execute saved scripts, load embedded content and shadow DOM.<br>
                                        Note that scripts are not saved by default (see the page capture settings).</div>
                                    </div>
                                </fieldset>
                            </form>
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <td></td>
                <td><a href="advanced.html" target="_blank" style="float: right;">Advanced settings</a></td>
            </tr>
        </table>

    </div>
    <div id="div-capturesettings" class="settings-content" style="display:none;">
        <table width="815px" cellspacing="" cellpadding="" border="0" class="form-table">
            <tr>
                <td>Capture Options</td>
                <td>
                    <div class="panel" id="savepage" style="display: flex;">
                        <div style="flex: auto;">
                            <form>
                                <fieldset>
                                    <legend>&nbsp;Save Features&nbsp;</legend>
                                    <!--div>
                                        <input id="options-showwarning" type="checkbox"/><label for="options-showwarning">Show warning if any resources cannot be saved</label>
                                    </div>
                                    <div>
                                        <input id="options-showurllist" type="checkbox"/><label for="options-showurllist">Show list of all resources that cannot be saved</label>
                                    </div-->
                                    <div>
                                        <input id="options-retaincrossframes" type="checkbox"/><label
                                        for="options-retaincrossframes">Retain cross-origin frames and iframes</label>
                                    </div>
                                    <div>
                                        <input id="options-removeunsavedurls" type="checkbox"/><label
                                        for="options-removeunsavedurls">Remove URLs of all unsaved resources</label>
                                    </div>
                                    <div>
                                        <input id="options-loadshadow" type="checkbox"/><label
                                        for="options-loadshadow">Load shadow DOM</label>
                                    </div>
                                </fieldset>
                            </form>

                            <form>
                                <fieldset style="padding-bottom: 12px">
                                    <legend>&nbsp;Saved Items&nbsp;</legend>
                                    <div>
                                        <input id="options-savehtmlimagesall" type="checkbox"/><label
                                        for="options-savehtmlimagesall">HTML image files (all)</label>
                                    </div>
                                    <div>
                                        <input id="options-savehtmlaudiovideo" type="checkbox"/><label
                                        for="options-savehtmlaudiovideo">HTML audio & video files</label>
                                    </div>
                                    <div>
                                        <input id="options-savehtmlobjectembed" type="checkbox"/><label
                                        for="options-savehtmlobjectembed">HTML object & embed files</label>
                                    </div>
                                    <div>
                                        <input id="options-savecssimagesall" type="checkbox"/><label
                                        for="options-savecssimagesall">CSS image files (all)</label>
                                    </div>
                                    <div>
                                        <input id="options-savecssfontswoff" type="checkbox"/><label
                                        for="options-savecssfontswoff">CSS font files (woff for any browser)</label>
                                    </div>
                                    <div>
                                        <input id="options-savecssfontsall" type="checkbox"/><label
                                        for="options-savecssfontsall">CSS font files (all)</label>
                                    </div>
                                    <div>
                                        <input id="options-savescripts" type="checkbox"/><label
                                        for="options-savescripts">Scripts</label>
                                    </div>
                                    <div>
                                        <input id="options-removeelements" type="checkbox"/><label
                                        for="options-removeelements"
                                        style="display:inline-block; vertical-align: middle;">Do not save elements that
                                        have been hidden<br>by the page, page editors or content blockers</label>
                                    </div>
                                </fieldset>
                            </form>
                        </div>
                        <div style="flex: auto; margin-left: 20px;">
                            <form>
                                <fieldset>
                                    <legend>&nbsp;Limits&nbsp;</legend>
                                    <div>
                                        <input id="options-maxframedepth" type="number" min="0" max="10"
                                               value="0"/><label for="options-maxframedepth">Maximum depth of saved
                                        nested frames</label>
                                    </div>
                                    <div>
                                        <input id="options-maxresourcesize" type="number" min="1" max="100" value="50"/><label
                                        for="options-maxresourcesize">Maximum size allowed for a resource (MB)</label>
                                    </div>
                                    <div>
                                        <input id="options-maxresourcetime" type="number" min="5" max="60"
                                               value="30"/><label for="options-maxresourcetime">Maximum time for loading
                                        a resource (secs)</label>
                                    </div>
                                </fieldset>
                            </form>

                            <form>
                                <fieldset>
                                    <legend>&nbsp;Mixed Content&nbsp;</legend>
                                    <div>
                                        <input id="options-allowpassive" type="checkbox"/><label
                                        for="options-allowpassive">Allow passive mixed content (image, audio,
                                        video)</label>
                                    </div>
                                </fieldset>
                            </form>

                            <form id="options-refererheader">
                                <fieldset>
                                    <legend>&nbsp;Referer Header&nbsp;</legend>
                                    <div>
                                        <label>When requesting a resource:</label>
                                    </div>
                                    <div style="display: flex; align-content: center; align-items: center; flex-wrap: nowrap">
                                        <input id="options-noreferer" type="radio" name="header" value="0"/><label
                                        for="options-noreferer">Do not send referer header</label>
                                    </div>
                                    <div style="display: flex; align-content: center; align-items: center; flex-wrap: nowrap">
                                        <input id="options-originonly" type="radio" name="header" value="1"/><label
                                        for="options-originonly">Send referer header with origin only</label>
                                    </div>
                                    <div style="display: flex; align-content: center; align-items: center; flex-wrap: nowrap">
                                        <input id="options-originpath" type="radio" name="header" value="2"/><label
                                        for="options-originpath">Send referer header with origin and path</label>
                                    </div>
                                </fieldset>
                            </form>

                            <form>
                                <fieldset>
                                    <legend>&nbsp;Lazy Loading&nbsp;</legend>
                                    <div>
                                        <input id="options-lazyloadtype-1" type="checkbox"/><label
                                        for="options-lazyloadtype-1">Scroll down page to force lazy loads before saving</label>
                                    </div>
                                    <div>
                                        <input id="options-lazyloadtype-2" type="checkbox"/><label
                                        for="options-lazyloadtype-2">Shrink page to force lazy loads before saving</label>
                                    </div>
                                </fieldset>
                            </form>
                        </div>
                    </div>
                </td>
            </tr>
        </table>
    </div>
    <div id="div-cloud" class="settings-content" style="display:none;">
        <table width="815px" cellspacing="" cellpadding="" border="0" class="form-table">
            <tr>
                <td style="width: 98px">Status</td>
                <td>
                    <div class="panel double-container">
                        <div class="double-first">
                            <form>
                                <fieldset style="border: none; display: flex; align-items: center;">
                                    <input type="checkbox" id="option-enable-cloud"><label for="option-enable-cloud">Enable cloud</label>
                                </fieldset>
                            </form>
                        </div>
                        <div class="double-last">
                            <form>
                                <fieldset style="border: none; display: flex; align-items: center;">
                                    <input type="checkbox" id="option-cloud-background-sync"><label for="option-cloud-background-sync">Enable background synchronization</label>
                                    <i class="help-mark"></i>
                                    <span class="tips hide">May consume system resources.</span>
                                </fieldset>
                            </form>
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <td style="margin-left: 14px;">Providers</td>
                <td>
                    <div class="panel" style="">
                        <form>
                            <fieldset style="border: none; display: flex; align-items: center;">
                                <!--input type="radio" id="provider-dropbox" checked><label for="provider-dropbox"-->
                                <a href="http://dropbox.com" target="_blank">Dropbox</a>&nbsp;<!--/label-->
                                <span> (may be a subject of <a href="https://help.dropbox.com/accounts-billing/settings-sign-in/computer-limit" target="_blank"
                                >certain limitations</a>)</span>
                                <input type="button" class="blue-button" id="auth-dropbox" value="Sign in" style="margin-left: 10px;">
                            </fieldset>
                        </form>
                    </div>
                </td>
            </tr>
            <tr>
                <td>Platforms</td>
                <td>
                    <div class="panel">
                       <div style="display: flex; white-space: normal;">
                           <p style="display: inline-block; flex: 0 1 auto;">
                               <a href="https://scrapyard.page.link/android" target="_blank">Scrapyard application for Android</a> allows to share links and content to the Cloud shelf from mobile devices.
                           </p>
                           <img src="../images/android_qrcode.png" style="float: right;">
                       </div>
                    </div>
                </td>
            </tr>
        </table>
    </div>
    <div id="div-sync" class="settings-content" style="display:none;">
        <table width="815px" cellspacing="" cellpadding="" border="0" class="form-table">
            <tr>
                <td style="width: 98px">Status</td>
                <td>
                    <div class="panel double-container">
                        <div class="double-first">
                            <form>
                                <fieldset style="border: none; align-items: center;">
                                    <input type="checkbox" id="option-enable-sync"><label for="option-enable-sync">Enable synchronization</label>
                                    <i class="help-mark"></i>
                                    <span class="tips hide" style="font-weight: normal">Correctness of synchronization depends on properly set system time.</span>
                                    <div class="align-checkbox">
                                        <input type="checkbox" id="option-background-sync"><label for="option-background-sync">Background synchronization</label>
                                    </div>
                                </fieldset>
                            </form>
                        </div>
                        <div class="double-last">
                            <form>
                                <fieldset style="border: none;">
                                    <input type="checkbox" id="option-sync-on-startup"><label for="option-sync-on-startup">Synchronize on startup</label>
                                    <div class="align-checkbox">
                                        <input type="checkbox" id="option-sync-on-close-sidebar"><label for="option-sync-on-close-sidebar">Synchronize when I close sidebar</label>
                                    </div>
                                </fieldset>
                            </form>
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <td style="margin-left: 14px;">Folder</td>
                <td>
                    <div class="panel" style="">
                        <form>
                            <fieldset style="border: none; display: flex; align-items: center;">
                                <div id="sync-directory-path-container">
                                    <i class="help-mark"></i>
                                    <span class="tips hide">For example: <b>d:\my cloud\scrapyard</b> or <b>~/cloud/scrapyard</b></span>
                                    <input id="sync-directory-path" type="text"/>
                                </div>
                            </fieldset>
                        </form>
                    </div>
                </td>
            </tr>
            <tr id="sync-last-date-pane">
                <td style="margin-left: 14px;">&nbsp;</td>
                <td id="sync-last-date"></td>
            </tr>
        </table>
    </div>
    <div id="div-backup" class="settings-content" style="display:none;"></div>
    <div id="div-links" class="settings-content" style="display:none;"></div>
    <div id="div-importrdf" class="settings-content" style="display:none;"></div>
    <div id="div-helperapp" class="settings-content" style="display:none;">
        <div style="max-width: 800px; font-size: 110%;">
        <h2>Scrapyard Helper Application</h2>
            <p>Scrapyard helper application allows to transcend the limits of Firefox WebExtensions
                by providing several features that are otherwise impossible:</p>
        <ul>
            <li>Import and browse Scrapbook RDF archives from any filesystem location.</li>
            <li>Run scripts and display embedded objects on the saved pages.</li>
            <li>Improve export performance.</li>
            <li>Upload local files.</li>
            <li>Manage backups.</li>
            <li>Synchronization.</li>
        </ul>

            <p id="helper-app-version-installed"><b>Installed version:</b> checking...</p>
            <p id="helper-app-version"><b>Latest version:</b> checking...</p>

            <p>On Windows, the helper application could be installed automatically without the need for any configuration. It could also be installed
                manually on any system that supports Python 3.7+ with Tcl/Tk (you may need to consult
                <a href="https://wiki.mozilla.org/WebExtensions/Native_Messaging#Host_Manifests" target="_blank">Mozilla Wiki</a>
                for more details on the configuration of native messaging).</p>

            <h3>Downloads</h3>
            <ul>
                <li style="padding-bottom: 5px"><a id="helper-windows-inst" href="#helperapp">Automated Windows installer</a></li>
                <li><a id="helper-manual-inst" href="#helperapp">Archive for manual installation</a></li>
            </ul>

            <p>It is necessary to restart Firefox after the application has been installed, or to
                completely close the browser before updating to a new version.</p>
        </div>
    </div>
    <div id="div-help" class="settings-content" style="display:none;"></div>
    <div id="div-diagnostics" class="settinges-content" style="display:none;">
        <div id="diagnostics-container">
            <h2>Scrapyard Diagnostics</h2>
            <p id="diagnostics-guide">Please do not try to reinstall the add-on. Create an issue at the Scrapyard
                <a href="https://github.com/GChristensen/scrapyard/issues" target="_blank">support page</a>
                with the info below.</p>

            <pre id="diagnostics-error-info"></pre>
        </div>
    </div>
    <div id="div-about" class="settings-content" style="display:none;">
        <div id="about-version-panel">
            <div style="text-align: center">
                <img src="../icons/scrapyard.svg" width="150px" height="150px"/>
                <h1 style="font-size: 24pt; margin: 10px">Scrapyard</h1>
                <h2 id="about-version">Version: </h2>
                <div class="about-links">
                    <img width="16px" height="16px" src="../icons/scrapyard.svg" style="margin-bottom: -2px;"/>
                    <a class="about-link" href="https://gchristensen.github.io/scrapyard/" target="_blank">Homepage</a>
                    | <img width="16px" height="16px" src="../icons/amo.ico" style="margin-bottom: -2px;"/>
                      <a class="about-link" href="https://addons.mozilla.org/en-US/firefox/addon/scrapyard/" target="_blank">AMO</a>
                    | <img width="16px" height="16px" src="../icons/github.ico" style="margin-bottom: -2px;"/>
                      <a class="about-link" href="https://github.com/GChristensen/scrapyard/" target="_blank">GitHub</a>
                </div>
                <div class="about-links" style="margin-top: 20px;">
                    <img width="16px" height="16px" src="../icons/patreon.png" style="margin-bottom: -2px;"/>
                    <a class="about-link" href="https://patreon.com/gchristnsn" target="_blank">Donate</a>
                </div>
            </div>
        </div>
        <div id="about-changes-header">
            <h2>Changes</h2>
        </div>
        <div id="about-changes"></div>
    </div>
</div>
</body>
</html>
